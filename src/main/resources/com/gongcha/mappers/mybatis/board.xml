<?xml version="1.0" encoding="UTF-8"?>

<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="Board">
	
	<!-- 용병 모집 게시글 저장 -->
	<insert id="insert_regi">
  		insert into recruit (recruit_no, city, title, recruit_content, mem_id, stadium_match_no, regdate, match_level) 
  		values (recruit_no_seq.nextval, #{city,jdbcType=VARCHAR}, #{title,jdbcType=VARCHAR}, #{recruit_content,jdbcType=VARCHAR}, #{mem_id,jdbcType=VARCHAR},
  		#{stadium_match_no,jdbcType=VARCHAR}, sysdate, #{match_level,jdbcType=VARCHAR})
	</insert>

	<!-- 용병 모집 목록 -->
	<select id="get_list" resultType="board">
  		select * from recruit r join stadium_match s on r.stadium_match_no = s.stadium_match_no order by recruit_no desc
	</select>

	<!-- 게시글 보기 -->
	<select id="get_cont" resultType="board">
		 select * from recruit a join stadium_match b on a.stadium_match_no = b.stadium_match_no where a.recruit_no=#{recruit_no}
	</select>
	
	<!-- 글쓰기에서 내가 예약한 구장 보기-->
	<select id="get_match" resultType="board">
		select * from stadium_match where mem_id=#{mem_id,jdbcType=VARCHAR}
	</select>

	<!-- 글보기에서 내 아이디 값 확인 -->
	<select id="get_id" resultType="board">
	  	select * from recruit where recruit_no=#{recruit_no,jdbcType=VARCHAR} and mem_id=#{mem_id,jdbcType=VARCHAR}
	</select>
	
	<!-- 글보기 수정 -->
	<select id="get_regi" resultType="board">
		select * from recruit where recruit_no=#{recruit_no}
	</select>
	
	<!-- 글작성 매치 중복확인 -->
	<select id="check_over" resultType="board">
		select * from recruit where stadium_match_no = #{stadium_match_no}
	</select>
	
	<!-- 글수정 완료 -->
	<update id="edit">
		update recruit set city=#{city}, title=#{title}, recruit_content=#{recruit_content},
		stadium_match_no=#{stadium_match_no}, match_level=#{match_level} where recruit_no=#{recruit_no} and mem_id=#{mem_id,jdbcType=VARCHAR}
	</update>
	
	<!-- 글수정에서 아이디 확인 -->
	<select id="id_ck" resultType="board">
		select * from recruit where recruit_no=#{recruit_no} and mem_id=#{mem_id,jdbcType=VARCHAR}
	</select>
	

</mapper>